System.register(["./index-legacy-21a4f5c1.js","./axios-legacy-24b06a60.js","./login-legacy-e0116e80.js"],(function(e,a){"use strict";var l,t,o,u,n,s,r,c,d,i,g,v,m,f,p,h,_,b,w,y,k,V;return{setters:[e=>{l=e.d,t=e.r,o=e.u,u=e.a,n=e.c,s=e.w,r=e.b,c=e.o,d=e.e,i=e.f,g=e.g,v=e.I,m=e.h,f=e.n,p=e.i,h=e.t,_=e.j,b=e.k,w=e.l,y=e.m},e=>{k=e.a},e=>{V=e.u}],execute:function(){const a={class:"flex-center"};e("default",l({__name:"LoginPage",setup(e){const l=t(""),z=t(""),C=o(),T=V(),j=t(""),x=t(""),E=t("");function L(){/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(l.value)?j.value="":j.value="Invalid email format"}function I(){z.value.length<8?x.value="Password must be at least 8 characters long":x.value=""}function P(){const e={email:l.value,password:z.value};k.post("https://curacaodevicemgmt-test.azurewebsites.net/auth/login/",e).then((e=>{console.log("Login successful:",e.data);const a=e.data.token;T.set("authToken",a),k.get(`https://curacaodevicemgmt-test.azurewebsites.net/signup/?email=${l.value}`).then((e=>{"admin"===e.data.role?C.push("/AdminTabs/users"):"developer"===e.data.role?C.push("/DevTabs/add"):"technician"===e.data.role&&C.push("/TechTabs/move")})).catch((e=>{console.error("Error fetching user role:",e)}))})).catch((e=>{console.error("Login error:",e),E.value=e.message}))}return(e,t)=>{const o=u("ion-card-title"),k=u("ion-card-header"),V=u("ion-item"),C=u("ion-card-content"),T=u("ion-card");return c(),n(r(y),null,{default:s((()=>[d(r(w),null,{default:s((()=>[i("div",a,[d(T,null,{default:s((()=>[d(k,null,{default:s((()=>[d(o,{class:"card-title"},{default:s((()=>[g(" Curacao "),d(r(v),{class:"login-image",src:"../public/Curacao.png"})])),_:1})])),_:1}),d(C,null,{default:s((()=>[d(V,null,{default:s((()=>[d(r(m),{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),label:"Email","label-placement":"floating",placeholder:"Enter your email",type:"email",class:f({"is-invalid":j.value}),onChange:L},null,8,["modelValue","class"]),j.value?(c(),n(r(p),{key:0,color:"danger"},{default:s((()=>[g(h(j.value),1)])),_:1})):_("",!0)])),_:1}),d(V,null,{default:s((()=>[d(r(m),{modelValue:z.value,"onUpdate:modelValue":t[1]||(t[1]=e=>z.value=e),label:"Password","label-placement":"floating",placeholder:"Enter your password",type:"password",class:f({"is-invalid":x.value}),onChange:I},null,8,["modelValue","class"]),x.value?(c(),n(r(p),{key:0,color:"danger"},{default:s((()=>[g(h(x.value),1)])),_:1})):_("",!0)])),_:1}),d(r(b),{class:"recover-button",color:"dark",fill:"clear",size:"large"},{default:s((()=>[g("Forgot email/password")])),_:1}),E.value?(c(),n(r(p),{key:0,color:"danger"},{default:s((()=>[g(h(E.value),1)])),_:1})):_("",!0),d(r(b),{class:"login-button",size:"large",onClick:P},{default:s((()=>[g("LOGIN")])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1})}}}))}}}));
