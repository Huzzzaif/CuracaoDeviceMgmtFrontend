import{d as L,r as c,u as A,a as i,c as m,w as e,b as l,o as p,e as a,f as D,g as n,I as U,h as I,n as V,i as w,t as b,j as k,k as x,l as $,m as j}from"./index-bd6c0655.js";import{a as y}from"./axios-17bef652.js";import{u as F}from"./login-ac313ca6.js";const G={class:"flex-center"},q=L({__name:"LoginPage",setup(O){const s=c(""),d=c(""),f=A(),E=F(),r=c(""),u=c(""),_=c("");function T(){/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(s.value)?r.value="":r.value="Invalid email format"}function z(){d.value.length<8?u.value="Password must be at least 8 characters long":u.value=""}function N(){const g={email:s.value,password:d.value};y.post("https://curacaodevicemgmt-test.azurewebsites.net/auth/login/",g).then(o=>{console.log("Login successful:",o.data);const v=o.data.token;E.set("authToken",v),y.get("https://curacaodevicemgmt-test.azurewebsites.net/signup/?email=".concat(s.value)).then(t=>{t.data.role==="admin"?f.push("/AdminTabs/users"):t.data.role==="developer"?f.push("/DevTabs/add"):t.data.role==="technician"&&f.push("/TechTabs/move")}).catch(t=>{console.error("Error fetching user role:",t)})}).catch(o=>{console.error("Login error:",o),_.value=o.message})}return(g,o)=>{const v=i("ion-card-title"),t=i("ion-card-header"),C=i("ion-item"),P=i("ion-card-content"),B=i("ion-card");return p(),m(l(j),null,{default:e(()=>[a(l($),null,{default:e(()=>[D("div",G,[a(B,null,{default:e(()=>[a(t,null,{default:e(()=>[a(v,{class:"card-title"},{default:e(()=>[n(" Curacao "),a(l(U),{class:"login-image",src:"../public/Curacao.png"})]),_:1})]),_:1}),a(P,null,{default:e(()=>[a(C,null,{default:e(()=>[a(l(I),{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=h=>s.value=h),label:"Email","label-placement":"floating",placeholder:"Enter your email",type:"email",class:V({"is-invalid":r.value}),onChange:T},null,8,["modelValue","class"]),r.value?(p(),m(l(w),{key:0,color:"danger"},{default:e(()=>[n(b(r.value),1)]),_:1})):k("",!0)]),_:1}),a(C,null,{default:e(()=>[a(l(I),{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=h=>d.value=h),label:"Password","label-placement":"floating",placeholder:"Enter your password",type:"password",class:V({"is-invalid":u.value}),onChange:z},null,8,["modelValue","class"]),u.value?(p(),m(l(w),{key:0,color:"danger"},{default:e(()=>[n(b(u.value),1)]),_:1})):k("",!0)]),_:1}),a(l(x),{class:"recover-button",color:"dark",fill:"clear",size:"large"},{default:e(()=>[n("Forgot email/password")]),_:1}),_.value?(p(),m(l(w),{key:0,color:"danger"},{default:e(()=>[n(b(_.value),1)]),_:1})):k("",!0),a(l(x),{class:"login-button",size:"large",onClick:N},{default:e(()=>[n("LOGIN")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})}}});export{q as default};
