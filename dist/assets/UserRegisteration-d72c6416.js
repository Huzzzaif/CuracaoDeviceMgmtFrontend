import{a as R}from"./axios-17bef652.js";import{d as A,r as s,u as F,a as C,c as _,w as e,b as l,o as g,e as a,f as G,D as H,E as j,G as J,g as n,H as X,J as x,h as E,n as V,t as b,j as k,k as Z,l as $,m as q}from"./index-ac5368cc.js";import{u as K}from"./login-8cdd83dc.js";const L={class:"flex-center"},ee=A({__name:"UserRegisteration",setup(M){const p=s(""),u=s(""),m=s(""),r=s(""),i=s(""),d=s(""),c=s(""),v=s(""),P=F(),h=K().get("csrftoken");h&&(R.defaults.headers.common["X-CSRFToken"]=h);function T(){/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(p.value)?i.value="":i.value="Invalid email format"}function U(){u.value.length<8?d.value="Password must be at least 8 characters long":d.value=""}function B(){m.value!==u.value?c.value="Passwords do not match!":c.value=""}function D(){r.value?v.value="":v.value="Please select an option"}function y(){return p.value&&u.value&&m.value&&r.value&&!i.value&&!d.value&&!c.value&&!v.value}async function N(){if(y())try{const f=await R.post("http://localhost:8000/signup/",{email:p.value,password:u.value,reenter_password:m.value,role:r.value});console.log("Registration successful",f),P.push("/login")}catch(f){console.error("An error occurred.",f.response)}}return(f,o)=>{const S=C("ion-img"),w=C("ion-text"),I=C("ion-select-option"),z=C("ion-select");return g(),_(l(q),null,{default:e(()=>[a(l($),null,{default:e(()=>[G("div",L,[a(l(H),{class:"ion-no-margin"},{default:e(()=>[a(l(j),null,{default:e(()=>[a(l(J),{class:"card-title"},{default:e(()=>[n("Curacao "),a(S,{class:"login-image",src:"../public/Curacao.png"})]),_:1})]),_:1}),a(l(X),null,{default:e(()=>[a(l(x),null,{default:e(()=>[a(l(E),{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=t=>p.value=t),label:"Email","label-placement":"floating",placeholder:"Enter text",type:"email",class:V({"is-invalid":i.value}),onChange:T},null,8,["modelValue","class"]),i.value?(g(),_(w,{key:0,color:"danger",class:"wrap-text"},{default:e(()=>[n(b(i.value),1)]),_:1})):k("",!0)]),_:1}),a(l(x),null,{default:e(()=>[a(l(E),{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=t=>u.value=t),label:"Password","label-placement":"floating",placeholder:"Enter text",type:"password",class:V({"is-invalid":d.value}),onChange:U},null,8,["modelValue","class"]),d.value?(g(),_(w,{key:0,color:"danger",class:"wrap-text"},{default:e(()=>[n(b(d.value),1)]),_:1})):k("",!0)]),_:1}),a(l(x),null,{default:e(()=>[a(l(E),{modelValue:m.value,"onUpdate:modelValue":o[2]||(o[2]=t=>m.value=t),label:"Re-enter password","label-placement":"floating",placeholder:"Enter text",type:"password",class:V({"is-invalid":c.value}),onChange:B},null,8,["modelValue","class"]),c.value?(g(),_(w,{key:0,color:"danger",class:"wrap-text"},{default:e(()=>[n(b(c.value),1)]),_:1})):k("",!0)]),_:1}),a(l(x),null,{default:e(()=>[a(z,{modelValue:r.value,"onUpdate:modelValue":o[3]||(o[3]=t=>r.value=t),label:"Select an option","label-placement":"floating",class:V({"is-invalid":v.value}),onIonChange:o[4]||(o[4]=t=>{r.value=t.detail.value,D()})},{default:e(()=>[a(I,{value:"developer"},{default:e(()=>[n("Developer")]),_:1}),a(I,{value:"admin"},{default:e(()=>[n("Admin")]),_:1}),a(I,{value:"technician"},{default:e(()=>[n("Technician")]),_:1})]),_:1},8,["modelValue","class"]),v.value?(g(),_(w,{key:0,color:"danger",class:"wrap-text"},{default:e(()=>[n(b(v.value),1)]),_:1})):k("",!0)]),_:1}),a(l(Z),{class:"login-button",size:"default",onClick:N,disabled:!y()},{default:e(()=>[n("REGISTER")]),_:1},8,["disabled"])]),_:1})]),_:1})])]),_:1})]),_:1})}}});export{ee as default};
